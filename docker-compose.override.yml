# Development overrides
# This file is automatically loaded with docker-compose.yml

version: "3.8"

services:
  backend:
    # Enable hot reload for development
    command: yarn start:dev
    environment:
      DEBUG: "true"
      LOG_LEVEL: debug

  frontend:
    # Enable hot reload for development
    command: yarn dev
    environment:
      WATCHPACK_POLLING: "true"

  # Nginx Reverse Proxy for development
  nginx:
    image: nginx:alpine
    container_name: learnjoy-nginx
    ports:
      - "8080:80"
    volumes:
      - ./nginx/nginx.conf:/etc/nginx/nginx.conf:ro
      - ./uploads:/var/www/uploads:ro
    depends_on:
      - frontend
      - backend
    networks:
      - learnjoy-network

  # Optional: pgAdmin for database management
  pgadmin:
    image: dpage/pgadmin4:latest
    container_name: learnjoy-pgadmin
    environment:
      PGADMIN_DEFAULT_EMAIL: ${PGADMIN_EMAIL:-admin@learnjoy.dev}
      PGADMIN_DEFAULT_PASSWORD: ${PGADMIN_PASSWORD:-admin}
    ports:
      - "5050:80"
    depends_on:
      - postgres
    networks:
      - learnjoy-network
    profiles:
      - tools
